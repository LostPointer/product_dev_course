collection:
  get:
    tags: [sensors]
    summary: List sensors
    operationId: listSensors
    parameters:
      - $ref: ../components/parameters.yaml#/ProjectIdQuery
    responses:
      200:
        description: Paginated sensors
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/SensorListResponse
  post:
    tags: [sensors]
    summary: Register sensor
    operationId: registerSensor
    parameters:
      - $ref: ../components/parameters.yaml#/IdempotencyKey
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ../components/schemas.yaml#/SensorRegisterRequest
    responses:
      201:
        description: Sensor registered (token included)
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/SensorTokenResponse
      400:
        description: Validation error
      409:
        description: Idempotency key conflicts with another payload

rotateToken:
  post:
    tags: [sensors]
    summary: Rotate sensor token
    operationId: rotateSensorToken
    parameters:
      - $ref: ../components/parameters.yaml#/SensorId
    responses:
      200:
        description: Token rotated
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/SensorTokenResponse

conversionProfiles:
  get:
    tags: [conversion_profiles]
    summary: List conversion profiles
    operationId: listConversionProfiles
    parameters:
      - $ref: ../components/parameters.yaml#/SensorId
      - $ref: ../components/parameters.yaml#/ProjectIdQuery
    responses:
      200:
        description: Paginated conversion profiles
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/ConversionProfileListResponse
  post:
    tags: [conversion_profiles]
    summary: Create conversion profile
    operationId: createConversionProfile
    parameters:
      - $ref: ../components/parameters.yaml#/SensorId
      - $ref: ../components/parameters.yaml#/ProjectIdQuery
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: ../components/schemas.yaml#/ConversionProfileCreate
    responses:
      201:
        description: Conversion profile created
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/ConversionProfile

conversionProfilePublish:
  post:
    tags: [conversion_profiles]
    summary: Publish conversion profile
    operationId: publishConversionProfile
    parameters:
      - $ref: ../components/parameters.yaml#/SensorId
      - $ref: ../components/parameters.yaml#/ProfileId
      - $ref: ../components/parameters.yaml#/ProjectIdQuery
    responses:
      200:
        description: Conversion profile published
        content:
          application/json:
            schema:
              $ref: ../components/schemas.yaml#/ConversionProfile


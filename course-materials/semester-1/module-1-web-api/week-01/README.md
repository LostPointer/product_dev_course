# –ù–µ–¥–µ–ª—è 1: –í–≤–µ–¥–µ–Ω–∏–µ –≤ –±—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

## –¶–µ–ª–∏ –Ω–µ–¥–µ–ª–∏
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä
- –ò–∑—É—á–µ–Ω–∏–µ HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ HTTP —Å–µ—Ä–≤–µ—Ä–∞

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ –±—ç–∫–µ–Ω–¥?

**Backend** (–±—ç–∫–µ–Ω–¥) - —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è:
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ (–ë–î)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É

**Frontend** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (–±—Ä–∞—É–∑–µ—Ä, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       HTTP Request       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ          ‚îÇ
‚îÇ  Client  ‚îÇ                          ‚îÇ  Server  ‚îÇ
‚îÇ          ‚îÇ <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       HTTP Response      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–ª–∏–µ–Ω—Ç:**
- –ò–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç input (–±–∞–∑–æ–≤–æ)

**–°–µ—Ä–≤–µ—Ä:**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã
- –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ

### 3. HTTP –ü—Ä–æ—Ç–æ–∫–æ–ª

**HTTP (HyperText Transfer Protocol)** - –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –≥–∏–ø–µ—Ä—Ç–µ–∫—Å—Ç–∞

#### HTTP Request —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```http
GET /api/v1/users/123 HTTP/1.1
Host: api.example.com
User-Agent: Mozilla/5.0
Accept: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

```

**–ß–∞—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞:**
1. **Request Line**: –ú–µ—Ç–æ–¥ + URL + –í–µ—Ä—Å–∏—è HTTP
2. **Headers**: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
3. **Body**: –î–∞–Ω–Ω—ã–µ (–¥–ª—è POST/PUT/PATCH)

#### HTTP Response —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```http
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 85
Cache-Control: no-cache

{
  "id": 123,
  "username": "john_doe",
  "email": "john@example.com"
}
```

**–ß–∞—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞:**
1. **Status Line**: –í–µ—Ä—Å–∏—è + –°—Ç–∞—Ç—É—Å –∫–æ–¥ + –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
2. **Headers**: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞
3. **Body**: –î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞

#### HTTP –ú–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π |
|-------|----------|---------------|------------|
| GET | –ü–æ–ª—É—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å | –î–∞ | –î–∞ |
| POST | –°–æ–∑–¥–∞—Ç—å —Ä–µ—Å—É—Ä—Å | –ù–µ—Ç | –ù–µ—Ç |
| PUT | –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é | –î–∞ | –ù–µ—Ç |
| PATCH | –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å —á–∞—Å—Ç–∏—á–Ω–æ | –ù–µ—Ç | –ù–µ—Ç |
| DELETE | –£–¥–∞–ª–∏—Ç—å —Ä–µ—Å—É—Ä—Å | –î–∞ | –ù–µ—Ç |
| HEAD | –ö–∞–∫ GET, –Ω–æ –±–µ–∑ body | –î–∞ | –î–∞ |
| OPTIONS | –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã | –î–∞ | –î–∞ |

#### HTTP Status Codes

**1xx - Informational**
- 100 Continue

**2xx - Success**
- 200 OK - –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω
- 201 Created - —Ä–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
- 204 No Content - —É—Å–ø–µ—Ö –±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞

**3xx - Redirection**
- 301 Moved Permanently
- 302 Found (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- 304 Not Modified

**4xx - Client Error**
- 400 Bad Request - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- 401 Unauthorized - —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- 403 Forbidden - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- 404 Not Found - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- 405 Method Not Allowed - –º–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- 409 Conflict - –∫–æ–Ω—Ñ–ª–∏–∫—Ç
- 418 I'm a teapot - —è —á–∞–π–Ω–∏–∫
- 422 Unprocessable Entity - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- 429 Too Many Requests - –ø—Ä–µ–≤—ã—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- 451 Unavailable For Legal Reasons - –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º

**5xx - Server Error**
- 500 Internal Server Error - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- 502 Bad Gateway - –æ—à–∏–±–∫–∞ —à–ª—é–∑–∞
- 503 Service Unavailable - —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### 4. REST API principles

**REST (Representational State Transfer)** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è API

**–ü—Ä–∏–Ω—Ü–∏–ø—ã REST:**

1. **Client-Server** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2. **Stateless** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ–∑–∞–≤–∏—Å–∏–º
3. **Cacheable** - –æ—Ç–≤–µ—Ç—ã –º–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å
4. **Uniform Interface** - –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
5. **Layered System** - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**RESTful URL naming:**

```
# ‚úÖ –•–û–†–û–®–û
GET    /api/v1/users          # –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/v1/users/123      # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POST   /api/v1/users          # –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PUT    /api/v1/users/123      # –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /api/v1/users/123      # –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

GET    /api/v1/users/123/orders  # –ó–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# ‚ùå –ü–õ–û–•–û
GET    /api/v1/getUsers
POST   /api/v1/createUser
GET    /api/v1/user-list
DELETE /api/v1/deleteUserById?id=123
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

### –ó–∞–¥–∞–Ω–∏–µ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.11+
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ VS Code –∏–ª–∏ PyCharm
3. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ aiohttp

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
mkdir week-01-http-server
cd week-01-http-server

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ aiohttp
pip install aiohttp
pip freeze > requirements.txt
```

### –ó–∞–¥–∞–Ω–∏–µ 2: –ü—Ä–æ—Å—Ç–µ–π—à–∏–π HTTP —Å–µ—Ä–≤–µ—Ä

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server.py`:

```python
from aiohttp import web


async def hello(request: web.Request) -> web.Response:
    """–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ."""
    return web.Response(text="Hello, World!")


async def health(request: web.Request) -> web.Response:
    """Health check endpoint."""
    return web.json_response({"status": "healthy"})


def create_app() -> web.Application:
    """–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ."""
    app = web.Application()
    app.router.add_get('/', hello)
    app.router.add_get('/health', health)
    return app


if __name__ == '__main__':
    app = create_app()
    web.run_app(app, host='0.0.0.0', port=8000)
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python server.py
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
curl http://localhost:8000/
curl http://localhost:8000/health
```

### –ó–∞–¥–∞–Ω–∏–µ 3: HTTP Echo Server

–°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ:

```python
from aiohttp import web
import json


async def echo_handler(request: web.Request) -> web.Response:
    """
    –í–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–ø—Ä–æ—Å–µ.
    """
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—Ä–æ—Å–µ
    request_info = {
        "method": request.method,
        "path": request.path,
        "query": dict(request.query),
        "headers": dict(request.headers),
        "remote": request.remote,
    }

    # –ï—Å–ª–∏ –µ—Å—Ç—å body
    if request.can_read_body:
        try:
            body = await request.text()
            request_info["body"] = body
        except:
            request_info["body"] = None

    return web.json_response(request_info, indent=2)


def create_app() -> web.Application:
    app = web.Application()
    app.router.add_route('*', '/echo', echo_handler)
    return app


if __name__ == '__main__':
    app = create_app()
    web.run_app(app, host='0.0.0.0', port=8000)
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# GET –∑–∞–ø—Ä–æ—Å
curl "http://localhost:8000/echo?name=John&age=30"

# POST –∑–∞–ø—Ä–æ—Å
curl -X POST http://localhost:8000/echo \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello, Server!"}'

# –î—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã
curl -X PUT http://localhost:8000/echo
curl -X DELETE http://localhost:8000/echo
```

### –ó–∞–¥–∞–Ω–∏–µ 4: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä API

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ API –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

```python
from aiohttp import web
from typing import Dict, Any


async def add(request: web.Request) -> web.Response:
    """–°–ª–æ–∂–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª."""
    try:
        a = float(request.query.get('a', 0))
        b = float(request.query.get('b', 0))
        result = a + b

        return web.json_response({
            "operation": "add",
            "a": a,
            "b": b,
            "result": result
        })
    except ValueError:
        return web.json_response(
            {"error": "Invalid number format"},
            status=400
        )


async def calculate(request: web.Request) -> web.Response:
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä.
    POST /calculate
    Body: {"operation": "add", "a": 10, "b": 5}
    """
    try:
        data = await request.json()
    except:
        return web.json_response(
            {"error": "Invalid JSON"},
            status=400
        )

    operation = data.get('operation')
    a = data.get('a')
    b = data.get('b')

    # –í–∞–ª–∏–¥–∞—Ü–∏—è
    if not all([operation, a is not None, b is not None]):
        return web.json_response(
            {"error": "Missing required fields: operation, a, b"},
            status=400
        )

    try:
        a = float(a)
        b = float(b)
    except (ValueError, TypeError):
        return web.json_response(
            {"error": "a and b must be numbers"},
            status=400
        )

    # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ
    operations = {
        'add': lambda x, y: x + y,
        'subtract': lambda x, y: x - y,
        'multiply': lambda x, y: x * y,
        'divide': lambda x, y: x / y if y != 0 else None,
    }

    if operation not in operations:
        return web.json_response(
            {"error": f"Unknown operation: {operation}"},
            status=400
        )

    result = operations[operation](a, b)

    if result is None:
        return web.json_response(
            {"error": "Division by zero"},
            status=400
        )

    return web.json_response({
        "operation": operation,
        "a": a,
        "b": b,
        "result": result
    })


def create_app() -> web.Application:
    app = web.Application()

    # Routes
    app.router.add_get('/add', add)
    app.router.add_post('/calculate', calculate)

    return app


if __name__ == '__main__':
    app = create_app()
    web.run_app(app, host='0.0.0.0', port=8000)
```

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# GET –º–µ—Ç–æ–¥
curl "http://localhost:8000/add?a=10&b=5"

# POST –º–µ—Ç–æ–¥
curl -X POST http://localhost:8000/calculate \
  -H "Content-Type: application/json" \
  -d '{"operation": "add", "a": 10, "b": 5}'

curl -X POST http://localhost:8000/calculate \
  -H "Content-Type: application/json" \
  -d '{"operation": "multiply", "a": 7, "b": 8}'
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [HTTP MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP)
- [REST API Tutorial](https://restfulapi.net/)
- [aiohttp Documentation](https://docs.aiohttp.org/en/stable/)
- [HTTP Status Codes](https://httpstatuses.com/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- **curl** - –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (—Å–º. –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –Ω–∏–∂–µ)
- **HTTPie** - —É–¥–æ–±–Ω—ã–π CLI: `http GET localhost:8000/users`
- **Postman** - GUI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- **Insomnia** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Postman

### –ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ curl

**curl** - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤. –≠—Ç–æ must-have –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª—é–±–æ–≥–æ –±—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ curl

**macOS** (–æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```bash
curl --version
```

**Linux:**
```bash
sudo apt install curl  # Ubuntu/Debian
sudo yum install curl  # CentOS/RHEL
```

**Windows:**
- –°–∫–∞—á–∞—Ç—å —Å [curl.se](https://curl.se/download.html)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Git Bash

#### –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã

**GET –∑–∞–ø—Ä–æ—Å:**
```bash
# –ü—Ä–æ—Å—Ç–æ–π GET
curl http://localhost:8000/

# –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
curl "http://localhost:8000/users?page=1&limit=10"

# –° –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
curl -H "Authorization: Bearer token123" http://localhost:8000/api/users
```

**POST –∑–∞–ø—Ä–æ—Å:**
```bash
# POST —Å JSON –¥–∞–Ω–Ω—ã–º–∏
curl -X POST http://localhost:8000/api/users \
  -H "Content-Type: application/json" \
  -d '{"username": "john", "email": "john@example.com"}'

# POST –∏–∑ —Ñ–∞–π–ª–∞
curl -X POST http://localhost:8000/api/users \
  -H "Content-Type: application/json" \
  -d @user.json
```

**PUT –∑–∞–ø—Ä–æ—Å:**
```bash
# –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞
curl -X PUT http://localhost:8000/api/users/123 \
  -H "Content-Type: application/json" \
  -d '{"username": "john_updated", "email": "john@example.com"}'
```

**PATCH –∑–∞–ø—Ä–æ—Å:**
```bash
# –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
curl -X PATCH http://localhost:8000/api/users/123 \
  -H "Content-Type: application/json" \
  -d '{"email": "newemail@example.com"}'
```

**DELETE –∑–∞–ø—Ä–æ—Å:**
```bash
curl -X DELETE http://localhost:8000/api/users/123
```

#### –ü–æ–ª–µ–∑–Ω—ã–µ –æ–ø—Ü–∏–∏ curl

**-i / --include** - –ø–æ–∫–∞–∑–∞—Ç—å headers –≤ –æ—Ç–≤–µ—Ç–µ:
```bash
curl -i http://localhost:8000/api/users
# HTTP/1.1 200 OK
# Content-Type: application/json
# ...
```

**-v / --verbose** - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ (–≤–∫–ª—é—á–∞—è request headers):
```bash
curl -v http://localhost:8000/api/users
# > GET /api/users HTTP/1.1
# > Host: localhost:8000
# > User-Agent: curl/7.68.0
# ...
```

**-s / --silent** - —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º (–±–µ–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞):
```bash
curl -s http://localhost:8000/api/users
```

**-o / --output** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç –≤ —Ñ–∞–π–ª:
```bash
curl -o response.json http://localhost:8000/api/users
```

**-w / --write-out** - –≤—ã–≤–µ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
```bash
# –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞
curl -w "\nTime: %{time_total}s\n" http://localhost:8000/api/users

# HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥
curl -w "\nStatus: %{http_code}\n" http://localhost:8000/api/users

# –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
curl -w "\nSize: %{size_download} bytes\n" http://localhost:8000/api/users
```

**-L / --location** - —Å–ª–µ–¥–æ–≤–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞–º:
```bash
curl -L http://example.com/redirect
```

**--max-time** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```bash
curl --max-time 5 http://slow-api.example.com
```

#### –†–∞–±–æ—Ç–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

**Basic Authentication:**
```bash
curl -u username:password http://localhost:8000/api/users
# –ò–ª–∏
curl -H "Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=" http://localhost:8000/api/users
```

**Bearer Token (JWT):**
```bash
curl -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  http://localhost:8000/api/users
```

**API Key:**
```bash
curl -H "X-API-Key: your-api-key" http://localhost:8000/api/users
```

#### –†–∞–±–æ—Ç–∞ —Å cookies

**–û—Ç–ø—Ä–∞–≤–∏—Ç—å cookie:**
```bash
curl -b "session_id=abc123" http://localhost:8000/api/users
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å cookies –≤ —Ñ–∞–π–ª:**
```bash
curl -c cookies.txt http://localhost:8000/api/login
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cookies –∏–∑ —Ñ–∞–π–ª–∞:**
```bash
curl -b cookies.txt http://localhost:8000/api/users
```

#### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤

**–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª:**
```bash
curl -X POST http://localhost:8000/api/upload \
  -F "file=@/path/to/file.jpg" \
  -F "description=My photo"
```

**–ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤:**
```bash
curl -X POST http://localhost:8000/api/upload \
  -F "file1=@image1.jpg" \
  -F "file2=@image2.jpg"
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å curl

**–ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
#!/bin/bash

BASE_URL="http://localhost:8000"

echo "1. Health check..."
curl -s $BASE_URL/health | jq

echo "\n2. Get all users..."
curl -s $BASE_URL/api/users | jq

echo "\n3. Create user..."
curl -s -X POST $BASE_URL/api/users \
  -H "Content-Type: application/json" \
  -d '{"username": "testuser", "email": "test@example.com"}' | jq

echo "\n4. Get user by ID..."
curl -s $BASE_URL/api/users/1 | jq

echo "\n5. Update user..."
curl -s -X PATCH $BASE_URL/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{"email": "updated@example.com"}' | jq

echo "\n6. Delete user..."
curl -s -X DELETE $BASE_URL/api/users/1

echo "\nTests completed!"
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `test_api.sh` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
```bash
chmod +x test_api.sh
./test_api.sh
```

#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON —Å jq

**jq** - —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ.

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# macOS
brew install jq

# Linux
sudo apt install jq
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å curl:**
```bash
# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ JSON
curl -s http://localhost:8000/api/users | jq

# –ò–∑–≤–ª–µ—á—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø–æ–ª–µ
curl -s http://localhost:8000/api/users | jq '.[0].username'

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
curl -s http://localhost:8000/api/users | jq '.[] | select(.age > 25)'

# –ü–æ–¥—Å—á–µ—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤
curl -s http://localhost:8000/api/users | jq 'length'
```

#### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫—É—Ä—Å–∞

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TODO API:**
```bash
# –°–æ–∑–¥–∞—Ç—å TODO
curl -X POST http://localhost:8000/api/todos \
  -H "Content-Type: application/json" \
  -d '{"title": "Buy groceries", "completed": false}'

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ TODO
curl http://localhost:8000/api/todos | jq

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π TODO
curl http://localhost:8000/api/todos/1 | jq

# –û–±–Ω–æ–≤–∏—Ç—å TODO
curl -X PATCH http://localhost:8000/api/todos/1 \
  -H "Content-Type: application/json" \
  -d '{"completed": true}'

# –£–¥–∞–ª–∏—Ç—å TODO
curl -X DELETE http://localhost:8000/api/todos/1
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username": "testuser", "email": "test@example.com", "password": "SecurePass123"}'

# –í—Ö–æ–¥ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–∫–µ–Ω)
TOKEN=$(curl -s -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "testuser", "password": "SecurePass123"}' \
  | jq -r '.access_token')

echo "Token: $TOKEN"

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8000/api/auth/me | jq
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:**
```bash
# –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl "http://localhost:8000/api/users?page=1&limit=10" | jq

# –í—Ç–æ—Ä–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
curl "http://localhost:8000/api/users?page=2&limit=10" | jq
```

#### –°–æ–≤–µ—Ç—ã –∏ best practices

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ -v –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:**
   ```bash
   curl -v http://localhost:8000/api/users
   ```

2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥:**
   ```bash
   curl -w "\nHTTP Status: %{http_code}\n" http://localhost:8000/api/users
   ```

3. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ alias:**
   ```bash
   # –í ~/.bashrc –∏–ª–∏ ~/.zshrc
   alias api-get='curl -H "Content-Type: application/json"'
   alias api-post='curl -X POST -H "Content-Type: application/json"'
   ```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   export API_URL="http://localhost:8000"
   export API_TOKEN="your-token-here"

   curl -H "Authorization: Bearer $API_TOKEN" $API_URL/api/users
   ```

5. **–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ñ–∞–π–ª—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**
   ```bash
   # user.json
   {
     "username": "testuser",
     "email": "test@example.com",
     "password": "SecurePass123"
   }

   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
   curl -X POST http://localhost:8000/api/users \
     -H "Content-Type: application/json" \
     -d @user.json
   ```

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã curl

–ï—Å–ª–∏ curl –∫–∞–∂–µ—Ç—Å—è —Å–ª–æ–∂–Ω—ã–º, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

**HTTPie** - –±–æ–ª–µ–µ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install httpie

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
http GET http://localhost:8000/api/users
http POST http://localhost:8000/api/users username=john email=john@example.com
```

**Postman** - GUI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

### –ö–Ω–∏–≥–∏
- "HTTP: The Definitive Guide" - David Gourley
- "RESTful Web APIs" - Leonard Richardson

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

1. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É GET –∏ POST –∑–∞–ø—Ä–æ—Å–∞–º–∏?
2. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PUT, –∞ –∫–æ–≥–¥–∞ PATCH?
3. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "idempotent" –º–µ—Ç–æ–¥?
4. –ü–æ—á–µ–º—É REST API –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è stateless?
5. –ö–∞–∫–æ–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ—Å—É—Ä—Å–∞?
6. –ö–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ GET –∑–∞–ø—Ä–æ—Å–µ?
7. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É 401 –∏ 403 —Å—Ç–∞—Ç—É—Å–∞–º–∏?
8. –ß—Ç–æ —Ç–∞–∫–æ–µ CORS –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

## –°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è

–ù–∞ [–ù–µ–¥–µ–ª–µ 2](../week-02/README.md) –∏–∑—É—á–∏–º CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ: Pydantic –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—É aiohttp –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ TODO API! üöÄ

---

**–£–¥–∞—á–∏ —Å –±—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π! üíª**


# ============================================
# Local Development Environment Configuration
# ============================================
# Скопируйте этот файл в .env и при необходимости измените значения
# cp env.docker.example .env

# ============================================
# Docker Compose Network Configuration
# ============================================
# В Docker Compose сервисы доступны по именам, а не localhost
# Используйте эти значения для работы внутри Docker сети

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=experiment_db
POSTGRES_PORT=5433

# URL для подключения из контейнеров (использует имя сервиса)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/experiment_db
# URL для подключения с хоста (для локальной разработки)
# Используется порт 5433, чтобы не конфликтовать с локальным PostgreSQL на 5432
DATABASE_URL_LOCAL=postgresql://postgres:postgres@localhost:5433/experiment_db

# ============================================
# Experiment Service (Backend)
# ============================================
EXPERIMENT_SERVICE_ENV=development
EXPERIMENT_SERVICE_APP_NAME=experiment-service
EXPERIMENT_SERVICE_HOST=0.0.0.0
EXPERIMENT_SERVICE_PORT=8002

# Database pool settings
EXPERIMENT_SERVICE_DB_POOL_SIZE=20

# Auth Service URL (опционально, можно использовать заглушки)
# В Docker Compose: http://auth-service:8001/api/v1
# Локально: http://localhost:8001/api/v1
AUTH_SERVICE_URL=http://auth-service:8001/api/v1
AUTH_SERVICE_URL_LOCAL=http://localhost:8001/api/v1

# Message Broker (опционально, не используется активно)
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672/
RABBITMQ_URL_LOCAL=amqp://guest:guest@localhost:5672/
RABBITMQ_EXCHANGE=events

# Telemetry Broker (опционально, не используется активно)
TELEMETRY_BROKER_URL=redis://redis:6379/0
TELEMETRY_BROKER_URL_LOCAL=redis://localhost:6379/0

# OpenTelemetry (опционально)
OTEL_EXPORTER_ENDPOINT=http://otel-collector:4318
OTEL_EXPORTER_ENDPOINT_LOCAL=http://localhost:4318

# ============================================
# Auth Proxy (BFF)
# ============================================
AUTH_PROXY_PORT=8080
AUTH_PROXY_LOG_LEVEL=info

# Upstream URLs
# В Docker Compose используем имена сервисов
TARGET_EXPERIMENT_URL=http://experiment-service:8002
TARGET_EXPERIMENT_URL_LOCAL=http://localhost:8002

AUTH_URL=http://auth-service:8001
AUTH_URL_LOCAL=http://localhost:8001

# Cookie settings
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false
COOKIE_SAMESITE=lax
ACCESS_COOKIE_NAME=access_token
REFRESH_COOKIE_NAME=refresh_token
ACCESS_TTL_SEC=900
REFRESH_TTL_SEC=1209600

# CORS settings
CORS_ORIGINS=http://localhost:3000,http://localhost:80

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=60

# ============================================
# Experiment Portal (Frontend)
# ============================================
# Vite переменные (префикс VITE_ обязателен)
# В Docker Compose используем имя сервиса auth-proxy
VITE_API_URL=http://localhost:8080/api
# Для прямого подключения к experiment-service (без auth-proxy)
# VITE_API_URL=http://localhost:8002/api/v1

# ============================================
# Redis (опционально)
# ============================================
REDIS_PORT=6379
REDIS_PASSWORD=

# ============================================
# RabbitMQ (опционально)
# ============================================
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# ============================================
# Development Mode Settings
# ============================================
# Включить hot-reload для разработки
DEV_MODE=true
# Включить debug логирование
DEBUG=false

# ============================================
# Network Configuration
# ============================================
# Имя Docker сети (будет создана автоматически)
DOCKER_NETWORK_NAME=experiment-tracking-network

# ============================================
# Volume Names (для персистентности данных)
# ============================================
POSTGRES_DATA_VOLUME=experiment-postgres-data
REDIS_DATA_VOLUME=experiment-redis-data
LOKI_DATA_VOLUME=experiment-loki-data
GRAFANA_DATA_VOLUME=experiment-grafana-data

# ============================================
# Grafana Stack (Logging)
# ============================================
# Grafana веб-интерфейс для просмотра логов
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_ANONYMOUS_ENABLED=false

# Loki - система хранения логов
LOKI_PORT=3100





